<!DOCTYPE html>
<html lang="ja" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <title>Docker 構成ジェネレータ（モジュール版・プロトタイプ）</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=1400" />
  <link rel="stylesheet" href="src/style.css">
</head>
<body>
  <header class="app-header">
    <h1 class="app-title">Docker 構成ジェネレータ（モジュール版・プロトタイプ）</h1>
    <button id="themeToggleButton" type="button" class="theme-toggle-button">
      🌙 ダーク
    </button>
  </header>

  <main class="app-main">
    <!-- タブ -->
    <div class="tabs">
      <button type="button" class="tab-button active" data-tab="modules">モジュール</button>
      <button type="button" class="tab-button" data-tab="config">構成入力</button>
      <button type="button" class="tab-button" data-tab="output">生成結果</button>
    </div>

    <!-- モジュール選択タブ -->
    <section id="tab-modules" class="tab-content active">
      <div class="card">
        <h2>利用するモジュール</h2>
        <p class="note">
          使いたい機能の行をクリックして選択してください。選択されたモジュールだけが「構成入力」タブに表示され、docker-compose.yml の生成対象になります。
        </p>

        <table class="module-table">
          <thead>
            <tr>
              <th class="check-col"></th>
              <th>モジュール名</th>
            </tr>
          </thead>
          <tbody id="moduleListBody"></tbody>
        </table>
      </div>
    </section>

    <!-- 構成入力タブ -->
    <section id="tab-config" class="tab-content">
      <div class="card sticky-executor">
        <div class="executor-row">
          <div>
            <h2>共通設定 / 構成実行</h2>
            <div class="field-row">
              <span>プロジェクト名：</span>
              <div class="field-input-wrapper">
                <input
                  id="projectNameInput"
                  type="text"
                  placeholder="myapp"
                  value="myapp"
                />
                <p class="note">
                  プロジェクト名はコンテナ名やボリューム名のプレフィックスとして使用されます。
                </p>
              </div>
            </div>

            <!-- ★ 線を出したい位置（黄色のラインのところ） -->
            <div id="generateSeparator" class="generate-separator"></div>
          </div>

          <!-- ★ ボタン＋メッセージは executor-row の中に置く -->
          <div class="executor-actions">
            <button id="generateButton" type="button" class="primary-button">
              構成を実行
            </button>
            <div id="portMessage" class="generate-message"></div>
          </div>
        </div>
      </div>

      <div id="configSections"></div>
    </section>

    <!-- 生成結果タブ -->
    <section id="tab-output" class="tab-content">
      <div class="output-split">
      <div class="card">
        <h2>生成された docker-compose.yml</h2>
        <textarea id="composeOutput" spellcheck="false"></textarea>
        <div class="button-row">
          <button id="composeDownloadBtn" type="button" class="download-button">
            ダウンロード
          </button>
          <button id="composeCopyBtn" type="button" class="copy-button">
            コピー
          </button>
          <button id="composeClearBtn" type="button" class="danger-button">
            クリア
          </button>
        </div>
      </div>

      <div class="card">
        <h2>生成された Dockerfile（Web 用）</h2>
        <textarea id="dockerfileOutput" spellcheck="false"></textarea>
        <div class="button-row">
          <button id="dockerfileDownloadBtn" type="button" class="download-button">
            ダウンロード
          </button>
          <button id="dockerfileCopyBtn" type="button" class="copy-button">
            コピー
          </button>
          <button id="dockerfileClearBtn" type="button" class="danger-button">
            クリア
          </button>
        </div>
      </div>
      </div>
    </section>
  </main>

  <!-- 設定モーダルダイアログ -->
  <dialog id="settingsDialog" class="app-dialog settings-dialog">
    <div class="settings-layout">
      <!-- 左ペイン -->
      <nav class="settings-nav">
        <button class="settings-nav-item active" data-section="project">
          プロジェクト
        </button>
        <button class="settings-nav-item" data-section="appearance">
          外観
        </button>
      </nav>

      <!-- 右ペイン -->
      <section class="settings-content">
        <!-- プロジェクト -->
        <div id="settings-project" class="settings-section active">
          <h3>プロジェクト設定</h3>

          <!-- プロジェクトフォルダ -->
          <div class="settings-field-row">
            <span>プロジェクトフォルダ</span>
            <div class="settings-field-input-wrapper">
              <div class="path-picker">
                <button id="settingsProjectRootBrowse" type="button" class="browse-btn" aria-label="プロジェクトフォルダを選択">...</button>
                <input id="settingsProjectRootPath" type="text" placeholder="例：C:\work\myapp" />
              </div>
              <div id="settingsProjectRootHint" class="field-hint"></div>
            </div>
          </div>

          <!-- docker-compose.yml 保存場所 -->
          <div class="settings-field-row">
            <span>docker-compose.yml 保存場所</span>
            <div class="settings-field-input-wrapper">
              <div class="path-picker">
                <button id="settingsComposeDirBrowse" type="button" class="browse-btn" aria-label="docker-compose.yml 保存場所を選択">...</button>
                <input id="settingsComposeDirPath" type="text" placeholder="例：C:\work\myapp" />
              </div>
              <div id="settingsComposeDirHint" class="field-hint"></div>
            </div>
          </div>

          <!-- Dockerfile 保存場所 -->
          <div class="settings-field-row">
            <span>Dockerfile 保存場所</span>
            <div class="settings-field-input-wrapper">
              <div class="path-picker">
                <button id="settingsDockerfileDirBrowse" type="button" class="browse-btn" aria-label="Dockerfile 保存場所を選択">...</button>
                <input id="settingsDockerfileDirPath" type="text" placeholder="例：C:\work\myapp" />
              </div>
              <div id="settingsDockerfileDirHint" class="field-hint"></div>
            </div>
          </div>

          <!-- ログ保存場所 -->
          <div class="settings-field-row">
            <span>ログ保存場所</span>
            <div class="settings-field-input-wrapper">
              <div class="path-picker">
                <button id="settingsLogDirBrowse" type="button" class="browse-btn" aria-label="ログ保存場所を選択">...</button>
                <input id="settingsLogDirPath" type="text" placeholder="例：C:\work\myapp\logs" />
              </div>
              <div id="settingsLogDirHint" class="field-hint"></div>
            </div>
          </div>
        </div>

        <!-- 外観 -->
        <div id="settings-appearance" class="settings-section">
          <h3>外観</h3>

          <label class="settings-field-row">
            <span>テーマ</span>
            <select id="settingsTheme" class="settings-theme-select">
              <option value="system">自動</option>
              <option value="light">ライト</option>
              <option value="dark">ダーク</option>
              <option value="blue">青</option>
              <option value="green">緑</option>
              <option value="yellow">黄</option>
              <option value="orange">オレンジ</option>
              <option value="red">赤</option>
              <option value="pink">ピンク</option>
            </select>
          </label>
        </div>

        <div class="settings-footer">
          <button id="settingsSaveButton">保存</button>
          <button id="settingsCancelButton">キャンセル</button>
        </div>
      </section>
    </div>
  </dialog>

  <!-- バージョン情報モーダルダイアログ -->
  <dialog id="aboutDialog" class="app-dialog">
    <form method="dialog" class="dialog-content">
      <h2 class="dialog-title">バージョン情報</h2>
      <div class="dialog-body">
        <p class="dialog-description">
          Docker 構成ジェネレータ（モジュール版）
        </p>
        <p class="note">
          バージョン: <span id="aboutVersion">読み込み中...</span><br>
          ログファイル: docker-builder.log<br>
        </p>
      </div>
      <div class="dialog-footer">
        <button id="aboutCloseButton" type="submit">閉じる</button>
      </div>
    </form>
  </dialog>

  <!-- スクリプト -->
  <script type="module" src="./src/renderer.js"></script>

</body>
</html>
